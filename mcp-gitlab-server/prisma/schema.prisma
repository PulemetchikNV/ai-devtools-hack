// Prisma Schema for MCP GitLab Server

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = "postgresql://neondb_owner:npg_nE7DkJSRa8rB@ep-quiet-scene-adisd00u-pooler.c-2.us-east-1.aws.neon.tech/gitlab_mcp?sslmode=require&channel_binding=require"
}

/// Chat configuration - stores GitLab credentials for each Telegram chat
model ChatConfig {
  id            Int      @id @default(autoincrement())
  chatId        String   @unique @map("chat_id") /// Telegram chat ID
  gitlabUrl     String   @map("gitlab_url") /// GitLab instance URL (e.g., https://gitlab.com)
  accessToken   String   @map("access_token") /// Encrypted GitLab personal access token
  watchedRepos  String[] @default([]) @map("watched_repos") /// List of repo paths to watch (e.g., ["group/project"])
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @updatedAt @map("updated_at")

  @@map("chat_configs")
}

